<!DOCTYPE html>





<html lang="zh-tw">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/myblog/images/apple-touch-icon-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="32x32" href="/myblog/images/favicon-32x32-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="16x16" href="/myblog/images/favicon-16x16-next.png?v=7.4.1">
  <link rel="mask-icon" href="/myblog/images/logo.svg?v=7.4.1" color="#222">

<link rel="stylesheet" href="/myblog/css/main.css?v=7.4.1">


<link rel="stylesheet" href="/myblog/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/myblog/',
    scheme: 'Pisces',
    version: '7.4.1',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="keywords" content="JavaScript, React, d3, NodeJS, Web">
<meta property="og:type" content="website">
<meta property="og:title" content="Jinny&#39;s blog">
<meta property="og:url" content="https://chinyun.github.io/myblog/index.html">
<meta property="og:site_name" content="Jinny&#39;s blog">
<meta property="og:locale" content="zh-tw">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jinny&#39;s blog">
  <link rel="canonical" href="https://chinyun.github.io/myblog/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Jinny's blog</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-tw">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/myblog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jinny's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Writing For Sharing</p>
      
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/myblog/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/myblog/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            
  <div id="posts" class="posts-expand">
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://chinyun.github.io/myblog/myblog/2019/10/09/React-State-Management-Redux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="chinyun">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/myblog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jinny's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/myblog/2019/10/09/React-State-Management-Redux/" class="post-title-link" itemprop="url">React State Management & Redux</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-10-09 15:42:37 / Modified: 10:58:50" itemprop="dateCreated datePublished" datetime="2019-10-09T15:42:37+00:00">2019-10-09</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="How-React-manage-State"><a href="#How-React-manage-State" class="headerlink" title="How React manage State"></a>How React manage State</h1><p>React 使用單向數據流，父元件會把自身的 state 作為 props 傳遞給子元件，以此來共享資料。</p>
<p>根據官方文件描述：<br>「 React Componenet 除了接收資料外（ 透過 <code>this.props</code> 存取 ），也可以保存自身的 state （透過 <code>this.state</code> 存取）。當一個 component 的 state 改變的時候，產生的標記語法將會透過自動重新呼叫 <code>render()</code> 更新。」</p>
<p>React Componenet 變更 state 的唯一方法是用 <code>this.setState()</code>，而且 state 只能在自身的 Componenet 內變更，所以當應用程式的規模越來越大、元件越來越多，需要共通使用的 state 也會越來越多。 </p>
<h1 id="Lifting-State-Up"><a href="#Lifting-State-Up" class="headerlink" title="Lifting State Up"></a>Lifting State Up</h1><p>隨著應用程式增加更多功能，同一個 state 可能需要被多個同層級或非父子關係的元件使用，以反應相同的資料變化。<br>此時這個 state 必須被<strong>提升</strong>到最靠近他們的共同上層元件(ancestor)，再以 props 的形式傳遞給其他元件使用，這個過程稱為<strong>狀態提升</strong>(Lifting State Up)。</p>
<p>根據官方文件：<br>「 在 React 應用程式中，對於資料的變化只能有一個唯一的「真相來源」。通常來說，state 會優先被加入到需要 render 的 component。接著，如果其他的 component 也需要的話，你可以提升 state 到共同最靠近的 ancestor。你應該依賴<strong>上至下的資料流</strong>，而不是嘗試在不同 component 之間同步 state。」</p>
<p>但不斷提升 state 的結果可能是許多 state 被以 props 形式不斷傳遞到子元件，而需要改變 state 時也必須將 function 以 props 傳遞到子元件，在子元件被觸發後，在上層元件內呼叫 <code>this.setState()</code>。</p>
<p>如此一來，使用者操作應用程式改變資料等不同的 functions 被分散在各個元件，不僅不好維護，也容易因為 state 更新先後的問題引起錯誤。</p>
<h1 id="Why-Redux"><a href="#Why-Redux" class="headerlink" title="Why Redux"></a>Why Redux</h1><p>Redux 由 Dan Abramov 開發：<br>「 ..Redux provides a solid, stable and mature solution to managing state in your React application. Through a handful of small, useful patterns, Redux can transform your application from a total mess of confusing and scattered state, into a delightfully organized, easy to understand modern JavaScript powerhouse. ..」</p>
<p>Redux 受到幾個 Flux Pattern 重要特質的影響，過去的 MVC(Model-View-Controller) Pattern 是這樣的：</p>
<pre class="mermaid">graph LR
A(Action) --> B(Controller)
B --> C(Model)
C --> D(View)
C --> G(View)
B --> E(Model)
E --> G(View)
B --> F(Model)
F --> G(View)
E --> H(View)</pre>

<p>而 Flux Pattern 是這樣的：</p>
<pre class="mermaid">graph LR
A(Action) --> B(Dispatcher)
B --> C(Store)
C --> D(View)</pre>

<p>隨著 App 成長， state management 越來越複雜，所以我們會發現使用 Flux Pattern 這樣的邏輯是有效率的。</p>
<p>Redux Pattern:</p>
<pre class="mermaid">graph LR
A(Action) -- Middleware --> B(Reducer)
B --> C(Store)
C --> D(Make changes)</pre>

<p>Redux 的優點：</p>
<ul>
<li>Good for managing large state.</li>
<li>Useful for sharing data between containers.</li>
<li>Predictable state management using the 3 principles:<ol>
<li>Single source of truth - have one big object that describes the entire state<br>唯一真相來源 </li>
<li>State is read only - can only be modified by dispatching actions.<br>state 是唯讀的，改變 state 的唯一方式是發出一個 action</li>
<li>Changes using pure function - receives an input and always return s an output that is predictable.<br>變更必須是 pure function，要指定 state tree 如何藉由 action 來轉變，需要寫成 pure reducer<br>To dispatch state mutations you have to write a function that takes the previous state of the app and the action being dispatched, then return the next state of the app. This function is called the <strong>Reducer</strong>.<br>Pure function are those whose return values depend only upon the values of their arguments. Pure functions don’t have side effects like network or database calls. Also, pure functions don’t override the values of anything.</li>
</ol>
</li>
</ul>
<p>Redux help developer thinking in a way of “how can we build an app that is able to scale with thousands of user interactions” and “how can we make it that the information flows from one to another into a predictable view, a system that is predictable.”</p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>關於為什麼使用 Redux + React 的方式來管理 state，以及不使用和使用的差異是什麼，統整為以下三點：</p>
<ol>
<li><p>更有效率的管理 state：<br>Redux 採集中管理 state，再分配給需要該 state 的元件，因此不需要一直傳遞 props。</p>
</li>
<li><p>更有邏輯的管理 state：<br>在 Redux 管理下，一律透過 action 描述更新動作，經過 Reducer 來變更 state。</p>
</li>
<li><p>更好維護：<br>使用上結合兩者，將 UI 的 state 交給 React，將 Data 的 state 交給 Redux，當需要修改時，可以更快找到需要修改的地方。</p>
</li>
</ol>
<p>但並不是所有 React 應用程式都需要 Redux，需要判斷 state tree 是否很複雜：</p>
<ol>
<li>應用程式需要經常變化 UI</li>
<li>許多非父子關係的元件共用相同資料或以相同方式更新 state</li>
<li>同一個 state 受到多種不同方式更新</li>
</ol>
<p>如果有這些狀況可以使用 Redux 來管理 state。</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://zh-hant.reactjs.org/docs/lifting-state-up.html">React Docs</a><br><a href="https://egghead.io/courses/getting-started-with-redux">Redux Docs</a></p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://chinyun.github.io/myblog/myblog/2019/10/09/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="chinyun">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/myblog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jinny's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/myblog/2019/10/09/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-10-09 10:58:50" itemprop="dateCreated datePublished" datetime="2019-10-09T10:58:50+00:00">2019-10-09</time>
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/deployment.html">Deployment</a></p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://chinyun.github.io/myblog/myblog/2019/10/08/Comebine-d3-js-and-react-js/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="chinyun">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/myblog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jinny's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/myblog/2019/10/08/Comebine-d3-js-and-react-js/" class="post-title-link" itemprop="url">Comebine d3.js and react.js</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-10-08 16:09:54" itemprop="dateCreated datePublished" datetime="2019-10-08T16:09:54+00:00">2019-10-08</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-10-09 10:58:50" itemprop="dateModified" datetime="2019-10-09T10:58:50+00:00">2019-10-09</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Why-use-D3"><a href="#Why-use-D3" class="headerlink" title="Why use D3"></a>Why use D3</h1><p>D3 is a JavaScript library for visualizing data with HTML, SVG, and CSS.<br>D3 是一個利用資料集來操作文件的 JavaScript 函式庫，可以讓你繪製出用 HTML、SVG 及 CSS 做出來的多元化動態資料圖形，D3 遵照著網頁標準，因此現今的瀏覽器皆可直接支援瀏覽，不需要另外安裝任何框架或是套件，D3 很強大的一個功能就是資料視覺化和資料驅動(Data-Driven) 的 DOM 操作。<br>以資料驅動（ Data-Driven ）的方式在網頁上動態地操作 DOM，可以更有效率的處理巨量資料。</p>
<p>D3 特色包括：</p>
<ol>
<li>Flexibility：可以創造特殊圖形，語法彈性大</li>
<li>Elegance：流暢的動態轉場效果，簡潔的程式碼</li>
<li>Community：有龐大使用者社群支援，有許多開放資源</li>
</ol>
<h1 id="How-do-D3-work"><a href="#How-do-D3-work" class="headerlink" title="How do D3 work"></a>How do D3 work</h1><ul>
<li>Use D3 Select to grab hold of elements on the screen.</li>
<li>Use D3 Append to add SVGs onto the selections.</li>
<li>Use D3 Attr to set attributes of SVGs to make them appear on the screen.</li>
<li>Use method chaining to write cleaner code.</li>
<li>D3 is read in the data as an array of JSON objects. No matter the data comes from .TSV, .CSV or .JSON file.</li>
<li>The attributes of SVGs are actually coming from some data.</li>
<li>D3 gives us the power to selectively edit the SVGs onthe screen depending on what each data point is saying.</li>
</ul>
<h2 id="Data-Binding"><a href="#Data-Binding" class="headerlink" title="Data Binding"></a>Data Binding</h2><p>D3 的 Data Binding 機制，讓資料和 DOM 節點形成一對一的對應關係；當資料改變時， D3 會去更新相對應的 DOM 節點。</p>
<p><code>d3.select()</code>&amp;<code>d3.selectAll()</code>：選取 DOM 節點。<br><code>d3.data()</code>：傳遞資料，將每一筆資料綁定一個 DOM 節點，當資料更新時， D3 會知道這筆資料對應的 DOM 節點。</p>
<h2 id="General-Update-Pattern"><a href="#General-Update-Pattern" class="headerlink" title="General Update Pattern"></a>General Update Pattern</h2><p>D3 透過 enter() 和 exit() 來動態控制網頁上元素：</p>
<ul>
<li><code>d3.enter()</code>：比對網頁上元素，篩選出尚未綁定資料的節點，再用 <code>.append()</code> 新增。</li>
<li><code>d3.exit()</code>：比對網頁上元素，篩選出不存在相對應資料的節點，再用<code>.remove()</code> 移除。</li>
</ul>
<p>更新資料的的情形包括：</p>
<ol>
<li>JOIN new data with old elements</li>
<li>EXIT old elements not present in new data</li>
<li>UPDATE old elements present in new data.</li>
<li>ENTER new elements present in new data.</li>
</ol>
<h1 id="How-to-combine-D3-and-React"><a href="#How-to-combine-D3-and-React" class="headerlink" title="How to combine D3 and React"></a>How to combine D3 and React</h1><h3 id="呈現-UI-的邏輯不同"><a href="#呈現-UI-的邏輯不同" class="headerlink" title="呈現 UI 的邏輯不同"></a>呈現 UI 的邏輯不同</h3><ul>
<li>React：透過 State 改變觸發 Render()，根據最新的 State 重繪 UI</li>
<li>D3：透過觸發 Update Function 來載入新 Data ，根據 Data 產生 UI </li>
</ul>
<p>如果想要在 React 元件中寫 D3 視覺圖表，就需要思考如何將兩者結合，使資料更新時，<br>能夠同時在畫面上動態呈現視覺圖表變化。</p>
<h3 id="分工合作，做各自擅長的"><a href="#分工合作，做各自擅長的" class="headerlink" title="分工合作，做各自擅長的"></a>分工合作，做各自擅長的</h3><p>React 負責 DOM Render，D3 負責 SVG 繪圖：</p>
<ul>
<li>運用 React Refs 屬性操作 DOM 節點</li>
<li>當資料更新時由 React 重繪 UI：Lifecycle Method（componentDidMount、 componentDidUpdate）</li>
<li>將 SVG 繪圖交給 D3，負責 attribute &amp; style </li>
</ul>
<p>Assign the reference of the DOM element to a component property.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># in the react component</span><br><span class="line">...</span><br><span class="line">render() &#123;</span><br><span class="line">  const paths = this.props.data.map(d =&gt; &lt;path key=&#123;d.name&#125;/&gt;);</span><br><span class="line">  return (</span><br><span class="line">    ...</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;svg ref=&#123;el =&gt; this.svgEl = el&#125;&gt;</span><br><span class="line">        &#123;paths&#125;</span><br><span class="line">      &lt;/svg&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    ...</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>將 D3 Update Function 寫成 React Component 的元件 method</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">updateStyleAndAttrs = () =&gt; &#123;</span><br><span class="line">  ...</span><br><span class="line">  d3.select(this.svgEl)</span><br><span class="line">    .selectAll(&apos;path&apos;)</span><br><span class="line">    ...</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在元件生成完成後和元件更新（State 變更）完成時觸發 D3 Update Function</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">componentDidMount = () =&gt; &#123;</span><br><span class="line">  this.updateStyleAndAttrs();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">componentDidUpdate = () =&gt; &#123;</span><br><span class="line">  this.updateStyleAndAttrs();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://github.com/d3/d3/wiki/TW-Home">D3 Docs</a><br><a href="https://github.com/d3/d3/wiki/Gallery">D3 Gallery</a><br><a href="https://reurl.cc/k5EY23">D3.js Quick Start Guide</a><br><a href="https://codepen.io/thecraftycoderpdx/pen/jZyzKo">Codepen</a><br><a href="http://shubo.io/react-d3/">Shubo’s Notes</a></p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://chinyun.github.io/myblog/myblog/2019/10/04/Hexo-GitHubPage-TravisCI/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="chinyun">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/myblog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jinny's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/myblog/2019/10/04/Hexo-GitHubPage-TravisCI/" class="post-title-link" itemprop="url">Hexo+GitHubPage+TravisCI</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-10-04 14:50:40" itemprop="dateCreated datePublished" datetime="2019-10-04T14:50:40+00:00">2019-10-04</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-10-09 10:58:50" itemprop="dateModified" datetime="2019-10-09T10:58:50+00:00">2019-10-09</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><ol>
<li>About how to use <a href="https://hexo.io/">Hexo</a> build up my blog and deploy on <a href="">GitHub Pages</a>.</li>
<li>How to use <a href="https://travis-ci.com/">Travis</a> CI to set up automatically deployment.</li>
</ol>
<h2 id="Why-use-Hexo"><a href="#Why-use-Hexo" class="headerlink" title="Why use Hexo"></a>Why use Hexo</h2><ol>
<li>run on Node.js</li>
<li>fast build up</li>
<li>many plugins and big community</li>
</ol>
<h2 id="Start"><a href="#Start" class="headerlink" title="Start"></a>Start</h2><h3 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h3><ol>
<li>npm &amp; node.js</li>
<li>git</li>
</ol>
<h3 id="Installing"><a href="#Installing" class="headerlink" title="Installing"></a>Installing</h3><p>Install Hexo</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>

<p>Add hexo folder, cd into it and install packages through npm</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init &lt;folder&gt;</span><br><span class="line">cd &lt;folder&gt;</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Notes: the default theme ‘Landscape’ has an unknown variable at README.md line 77. It would lead to build failed. So need to delete the README.md file of the ‘Landscape’ theme. Or comment out that line. (2019.10.04)</p>
</blockquote>
<h3 id="Setting"><a href="#Setting" class="headerlink" title="Setting"></a>Setting</h3><p>Edit the <code>_config.yml</code> file </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"># Site</span><br><span class="line">title: &lt;YOUR BLOG NAME&gt;</span><br><span class="line">subtitle: &lt;BLOG SUBTITLE&gt;</span><br><span class="line">description:</span><br><span class="line">keywords:</span><br><span class="line">author: &lt;YOUR NAME&gt;</span><br><span class="line">language: zh-tw  //正體中文</span><br><span class="line">timezone:</span><br><span class="line"></span><br><span class="line"># URL</span><br><span class="line">url: https://&lt;username&gt;.github.io/&lt;repo-name&gt;/</span><br><span class="line">root: /&lt;repo-name&gt;/</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Notes: It is essensial to set <strong><code>root</code></strong> to <strong><code>/&lt;repo-name&gt;/</code></strong> otherwise it could led to CSS file generating failed.</p>
</blockquote>
<p>More details: Hexo document <a href="https://hexo.io/docs/configuration.html">Configuration</a></p>
<h3 id="Deployment"><a href="#Deployment" class="headerlink" title="Deployment"></a>Deployment</h3><p>In official document tutorial, it recommends to use <code>Travis CI</code> to deploy <code>Github Pages</code>. It is free for open source repository, meaning your repository’s master branch has to be public.</p>
<h4 id="Two-options-of-GitHub-Pages-Url-Choosing"><a href="#Two-options-of-GitHub-Pages-Url-Choosing" class="headerlink" title="Two options of GitHub Pages Url Choosing"></a>Two options of GitHub Pages Url Choosing</h4><ol>
<li><p>Create a repo named <code>username.github.io</code>, where username is your username on GitHub. </p>
</li>
<li><p>Create a repo named anything. for example: <code>myblog</code>.</p>
</li>
</ol>
<p>The difference between these two options is that a user has only one site of url <code>https://&lt;username&gt;.github.io</code>, while you can have mutiple sites with the url <code>https://&lt;username&gt;.github.io/&lt;repo-name&gt;/</code>.</p>
<h4 id="Push-hexo-files-to-Github"><a href="#Push-hexo-files-to-Github" class="headerlink" title="Push hexo files to Github"></a>Push hexo files to Github</h4><ol>
<li>Push the files of your Hexo folder to the repository. </li>
</ol>
<blockquote>
<p>Notes: The public/ folder is not (and should not be) uploaded by default, make sure the <code>.gitignore</code> file contains <code>public/</code> line.</p>
</blockquote>
<h4 id="Add-Travis-CI-to-GitHub-account"><a href="#Add-Travis-CI-to-GitHub-account" class="headerlink" title="Add Travis CI to GitHub account"></a>Add Travis CI to GitHub account</h4><ol>
<li><p>Go to Applications settings, configure Travis CI to have access to the repo. You’ll be redirected to Travis page.</p>
</li>
<li><p>On a new tab, generate a new token with repo scopes. Note down the token value.</p>
</li>
<li><p>On the Travis page, go to your repo’s setting. Under Environment Variables, put GH_TOKEN as name and paste the token onto value. Click Add to save it.</p>
</li>
<li><p>Add <code>.travis.yml</code> file to your repo (alongside <code>_config.yml</code> &amp; <code>package.json</code>) with the following content:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">sudo: false</span><br><span class="line">language: node_js</span><br><span class="line">node_js:</span><br><span class="line">  - 10 # use nodejs v10 LTS</span><br><span class="line">cache: npm</span><br><span class="line">branches:</span><br><span class="line">  only:</span><br><span class="line">    - master # build master branch only</span><br><span class="line">script:</span><br><span class="line">  - hexo generate # generate static files</span><br><span class="line">deploy:</span><br><span class="line">  provider: pages</span><br><span class="line">  skip-cleanup: true</span><br><span class="line">  github-token: $GH_TOKEN</span><br><span class="line">  keep-history: true</span><br><span class="line">  on:</span><br><span class="line">    branch: master</span><br><span class="line">  local-dir: public</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="Deploy"><a href="#Deploy" class="headerlink" title="Deploy"></a>Deploy</h4><ol>
<li><p>To create a new post, youn can add <code>&lt;title&gt;.md</code> file in the <code>source/_posts</code> folder by running following command:</p>
<pre><code>hexo new [layout] &lt;title&gt;</code></pre><blockquote>
<p>Notes: <code>post</code> is the default layout. To change the default layout by editing the default_layout setting in <code>_config.yml</code>.</p>
</blockquote>
</li>
<li><p>You can monitor the building process at Travis CI dashboard. And add the image of build/passing by click it to copy the markdown script and paste into your <code>README.md</code> file in hexo folder.</p>
</li>
<li><p>Once Travis CI finish the deployment, the generated pages can be found in the <code>gh-pages</code> branch of your repository</p>
</li>
<li><p>In your GitHub repo’s setting, navigate to “GitHub Pages” section and make sure that the Source is pointed to <code>gh-pages</code> branch.</p>
</li>
<li><p>Now you can check the webpage at the url you set.</p>
</li>
</ol>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://hexo.io/docs/configuration.html">Hexo Docs</a><br><a href="https://help.github.com/en/articles/getting-started-with-github-pages">GitHub Pages</a><br><a href="https://docs.travis-ci.com/user/tutorial/">Travis CI Docs</a></p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
  </div>

  


          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">chinyun</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        
          <a href="/myblog/archives/">
        
          <span class="site-state-item-count">4</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
    
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">chinyun</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.4.1</div>



        












        
      </div>
    </footer>
  </div>

  
  <script src="/myblog/lib/anime.min.js?v=3.1.0"></script>
  <script src="/myblog/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/myblog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/myblog/js/utils.js?v=7.4.1"></script><script src="/myblog/js/motion.js?v=7.4.1"></script>
<script src="/myblog/js/schemes/pisces.js?v=7.4.1"></script>
<script src="/myblog/js/next-boot.js?v=7.4.1"></script>



  





















  

  

  

</body>
</html>
